<h1><%= @event.title %></h1>
<div class="row">
  <div class="col-md-8">
    <h2>
      by <%= link_to @event.user.name, @event.user %>
    </h2>
    <h3>
      <%= @event.type_event %>
    </h3>
    <ul>
      <li>
        happens in
        <strong><%= distance_of_time_in_words(Time.now, @event.happen_at) %></strong>
        , will last
        <strong><%= distance_of_time_in_words(@event.duration) %></strong>
      </li>
      <li>
        This event is
          <% if @event.privacy == 0 %>
            <strong>private</strong>
          <% else %>
            <strong>public</strong>
          <% end %>
      </li>
      <li>
        And wil happen at <strong><%= @event.location.name %></strong>
      </li>
      <li>
        <%= render "locations/show" %>
      </li>
    </ul>
  </div>
  <div class="col-md-4">
    <% if policy(@event).edit? %>
        <%= link_to "Edit event", edit_event_path(@event), class: 'btn btn-success' %>
    <% end %>
    <% if policy(@event).destroy? %>
        <%= link_to "Delete event", [@event], method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure you want to delete this event?' } %>
    <% end %>
  </div>
</div>

<%#Todo : rest location%>
<div style="display:none">
  <div id="location-latitude">
    <%= @event.location.lat %>
  </div>
  <div id="location-longitude">
    <%= @event.location.lng %>
  </div>
</div>

<script type="text/javascript">
  (function($) {

    var map = new Marker("#map");
    var current = {
      lat: parseFloat($("#location-latitude").html()),
      lng: parseFloat($("#location-longitude").html())
    };
    map.render({"lat": current.lat , "lng": current.lng});
    map.add({"lat": current.lat, "lng": current.lng, "title": "marker"});
  }(jQuery));
</script>
